<!DOCTYPE html>
<html lang="ptbr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Bin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/dashboard.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="http://www.chartjs.org/samples/latest/utils.js"></script>
</head>

<body>
    <div class="content">
        <div class="menu">
            <h3>Bairros</h3>
            <ul class="menu_list">
                <a href="../html/tela_dashboard.html">
                    <li>Todos os bairros</li>
                </a>
                <a href="../html/boa_vista.html">
                    <li>Boa Vista</li>
                </a>
                <a href="../html/jardim_paulista.html">
                    <li>Jardim Paulista</li>
                </a>
                <a href="../html/jabaquara.html">
                    <li>Jabaquara</li>
                </a>
                <a href="../html/santa_cecilia.html">
                    <li>Santa Cecília</li>
                </a>
                <a href="../html/santo_amaro.html">
                    <li>Santo Amaro</li>
                </a>
            </ul>
            <h3>Configurações</h3>
            <ul class="menu_list">
                <a href="tela_cadastro_lixeira.html">
                    <li>Adicionar lixeira</li>
                </a> <a href="tela_cadastro_logado.html">
                    <li>Adicionar Usuário</li>
                </a>
                <a href="Visualizacao_perfil.html">
                    <li>Usuário</li>
                </a>
            </ul>
            <a class="logOut" href="tela_inicio.html">Sair <img src="../img/logOut.png" alt=""></a>

            <div class="foto_user_box">
                <a href="Visualizacao_perfil.html"><img src="../img/perfil.png" alt=""></a> 
                <h4>Fernando Duarte</h4>
                <h5>Administrador</h5>
            </div>
        </div>
        <div class="conteudo">
            <h1>Santa Cecília</h1>
            <div class="box_dados">
                <div>
                    <h3>Lixeira Nivel <span style="color: #297011;">Baixo</span>  </h3>
                    <p>0</p>
                </div>
                <div>
                    <h3>Lixeira Nivel <span style="color: #d1ce00;">Médio</span></h3>
                    <p>1</p>
                </div>

                <div>
                    <h3>Lixeira Nível <span style="color: red;">Alto</span></h3>
                    <p>0</p>
                </div>
            </div>
            <img class="logo" src="img/logo_smartBin-removebg-preview.png" alt="">
            <div class="cards_grid">
                <div id="card" class="card">
                    <a href="#" id="openModal">
                        <h3>
                            Lixeira 4
                        </h3>
                    </a>
                    <i style="color: #d1ce00;" class="fa-solid fa-dumpster"></i>
                    <h4>Rua: santos drummond, 1047, Santa Cecília</h4>
                    <h4>Nível: <span style="color: #d1ce00;">Médio</span></h4>
                </div>
            </div>
            <h1 class="titulo_grafico">Gráfico:</h1>
            <div class="grafico_box">
                <select id="select_semana">
                    <option value="1">Essa semana</option>
                    <option value="2">Semana - 29/04/2024 até 05/05/2024</option>
                    <option value="3">Semana - 22/04/2024 até 28/04/2024</option>
                    <option value="4">Semana - 15/04/2024 até 21/04/2024</option>
                    <option value="5">Semana - 08/04/2024 até 14/04/2024</option>
                    <option value="6">Semana - 01/04/2024 até 07/04/2024</option>
                </select>
                <canvas id="myChart"></canvas>
            </div>
        </div>
        
    </div>
</body>

<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div class="area_edit">
            <h3>Lixeira 4</h3>
            <a href="#" id="EditModal"><i class="fa-solid fa-pen"></i></a>
        </div>
        <i style="color: #d1ce00;" class="fa-solid fa-dumpster"></i>
        <h4>Rua: santos drummond, 1047, Santa Cecília</h4>
        <h4>Nível: <span style="color: #d1ce00;">Médio</span></h4>
        <h3>Horarios</h3>
        <div>
            <h5>Nivel: Médio - 09:45:58 do dia 03/04/24 até 15:44:08 do dia 03/04/24</h5>
        </div>
    </div>
</div>

<div id="ModalEdicao" class="modal">
    <div class="modal-content">
        <span class="closeEdit">&times;</span>
        <h3 contenteditable="true">Lixeira 4</h3>
        <i style="color: #d1ce00;" class="fa-solid fa-dumpster"></i>
        <h4 contenteditable="true">Rua: santos drummond, 1047, Santa Cecília</h4>
        <h4>Nível: <span style="color: #d1ce00;">Médio</span></h4>
        <h3>Horarios</h3>
        <div>
            <h5>Nivel: Médio - 09:45:58 do dia 03/04/24 até 15:44:08 do dia 03/04/24</h5>
        </div>
        <div class="btn">
            <button class="botao" id="saveButton">salvar</button>
        </div>
    </div>
</div>

</html>

<script>
    document.getElementById('openModal').addEventListener('click', function () {
        document.getElementById('modal').style.display = 'block';
        document.querySelector('.conteudo').style.display = 'none';
    });

    document.querySelector('.close').addEventListener('click', function () {
        document.getElementById('modal').style.display = 'none';
        document.querySelector('.conteudo').style.display = 'block';
    });

    document.getElementById('EditModal').addEventListener('click', function () {
        document.getElementById('ModalEdicao').style.display = 'block';
        document.querySelector('.openModal').style.display = 'none'; // Oculta a div conteudo
    });

    document.querySelector('.closeEdit').addEventListener('click', function () {
        document.getElementById('ModalEdicao').style.display = 'none';
        document.querySelector('.openModal').style.display = 'block'; // Mostra a div conteudo novamente
    });

    // Adiciona um evento de clique ao botão "Salvar" no modal de edição
    document.getElementById('saveButton').addEventListener('click', function () {
        // Obtém o conteúdo modificado da div ModalEdicao
        var novoTitulo = document.getElementById('ModalEdicao').querySelector('h3').innerText;
        var novaRua = document.getElementById('ModalEdicao').querySelector('h4').innerText;

        // Atualiza o conteúdo correspondente na div modal
        document.getElementById('modal').querySelector('h3').innerText = novoTitulo;
        document.getElementById('modal').querySelector('h4').innerText = novaRua;

        document.getElementById('card').querySelector('h3').innerText = novoTitulo;
        document.getElementById('card').querySelector('h4').innerText = novaRua;

        // Esconde o modal de edição
        document.getElementById('ModalEdicao').style.display = 'none';
    });

    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado', 'Domingo'],
            datasets: [{
                label: 'Lixeira nivel médio',
                data: [1, 0, 1, 0, 1, 0, 0],
                borderWidth: 1,
                backgroundColor: 'yellow'
            },
            {
                label: 'Lixeira nivel alto',
                data: [0, 1, 0, 0, 0, 0, 0],
                borderWidth: 1,
                backgroundColor: 'red'
            }, 
            {
                label: 'Lixeira nivel baixo',
                data: [0, 0, 0, 1, 0, 1, 1],
                borderWidth: 1,
                backgroundColor: 'green'
            }
            ]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Quantidade de lixeiras'
                    }
                }
            },

        }
    });
</script>